(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["components/content/dynamic/dynamicCpns/DynamicCon"],{"51b8":function(n,t,e){"use strict";(function(n,i){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=e("587d"),c=e("7429"),a=e("2f62"),s=e("3389");function r(n){for(var t=1;t<arguments.length;t++){var e=null!=arguments[t]?arguments[t]:{},i=Object.keys(e);"function"===typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(e).filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),i.forEach(function(t){m(n,t,e[t])})}return n}function m(n,t,e){return t in n?Object.defineProperty(n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n}var u=function(){return e.e("components/content/loading-icon/LoadingIcon").then(e.bind(null,"aa5f"))},d={components:{LoadingIcon:u},data:function(){return{imgList:["/static/image/test/test.jpg","/static/image/test/02.jpg","/static/image/publish/aite.png","/static/image/publish/location.png","/static/image/publish/person.png"],imgUrl:"",currentPageUrl:"",isShowPraise:!1,hasPraise:!1,currentIndex:-1,popStyle:"",hasComment:!1,commentContent:"",showSmilingFace:!1,currentReplyindex:-1,commentPlaceholder:"评论",commentStyle:"",keyboardHeight:253}},computed:r({},(0,a.mapState)(["userInfo","friendDynamicList"])),filters:{getFormatTime:function(n){return(0,o.formatTimeStamp)(n,"yyyy-MM-dd hh-mm")}},methods:r({},(0,a.mapActions)(["getNewestDynamic"]),{queryMeHasPraise:function(t){var e=this.friendDynamicList[t],i=JSON.stringify(e.likePerson[0]);if(!(e.likePerson.length>0&&"{}"!==i))return n("log","未点赞"," at components\\content\\dynamic\\dynamicCpns\\DynamicCon.vue:211"),this.hasPraise=!1,!1;n("log","已点赞"," at components\\content\\dynamic\\dynamicCpns\\DynamicCon.vue:199");for(var o=this.userInfo.user.userAccount,c=0;c<e.likePerson.length;c++)for(var a in e.likePerson[c])if(a===o)return this.hasPraise=!0,c},publishComment:function(){this.commentContent&&(-1!==this.currentReplyindex?this.doComment(this.currentReplyindex):this.doComment())},doComment:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,o=this.friendDynamicList[this.currentIndex],c={user:this.userInfo.user.userAccount,toUser:e?o.comment[e].user:o.account,commentContent:this.commentContent,friendCircleId:o.id,fatherId:e?o.comment[e].commentId:0};(0,s.doCommentRequest)(c).then(function(e){n("log",e," at components\\content\\dynamic\\dynamicCpns\\DynamicCon.vue:243"),200===e.status?2e3===e.data.code?t.$nextTick(function(){t.hasComment=!1;var n=e.data.data[e.data.data.length-1];t.friendDynamicList[t.currentIndex].comment.push(n)}):i.showToast({title:"程序走丢了，请稍后重试",icon:"none"}):404===e.status?i.showToast({title:"网络走丢了，请稍后重试",icon:"none"}):i.showToast({title:"程序走丢了，请稍后重试",icon:"none"})}).catch(function(n){i.showToast({title:"程序走丢了，请稍后重试",icon:"none"})})},handlerPraise:function(t){var e=this;this.queryMeHasPraise(t),console.time("time");var o=i.createSelectorQuery().in(this);o.select(".right-praise-img".concat(t)).boundingClientRect(function(i){n("log","得到布局位置信息:",i," at components\\content\\dynamic\\dynamicCpns\\DynamicCon.vue:284");var o=i.top;e.popStyle="top: ".concat(o-9,"px; right:45px"),e.$nextTick(function(){setTimeout(function(){e.isShowPraise=!e.isShowPraise,e.currentIndex=t,console.timeEnd("time")},10)})}).exec()},toPraise:function(){var t=this,e=this.friendDynamicList[this.currentIndex],o={account:e.account,LikeAccount:this.userInfo.user.userAccount,friendCircleDynamicId:e.id};(0,s.doDynamicLikeRequest)(o).then(function(e){if(n("log",e," at components\\content\\dynamic\\dynamicCpns\\DynamicCon.vue:311"),200===e.status)if(2e3===e.data.code){if(t.hasPraise){var o=t.queryMeHasPraise(t.currentIndex);t.$nextTick(function(){t.friendDynamicList[t.currentIndex].likePerson.splice(o,1),t.hasPraise=!t.hasPraise})}else{var c={};c[t.userInfo.user.userAccount]=t.userInfo.user.nickname;var a=t.friendDynamicList[t.currentIndex].likePerson[0];t.$nextTick(function(){"{}"===JSON.stringify(a)&&t.friendDynamicList[t.currentIndex].likePerson.splice(0,1),t.friendDynamicList[t.currentIndex].likePerson.push(c),t.hasPraise=!t.hasPraise,n("log",t.friendDynamicList[t.currentIndex]," at components\\content\\dynamic\\dynamicCpns\\DynamicCon.vue:335")})}t.hidePraiseCommentMask()}else i.showToast({title:"程序走丢了，请稍后重试",icon:"none"});else 404===e.status?i.showToast({title:"网络走丢了，请稍后重试",icon:"none"}):i.showToast({title:"程序走丢了，请稍后重试",icon:"none"})}).catch(function(t){n("log",t," at components\\content\\dynamic\\dynamicCpns\\DynamicCon.vue:359"),i.showToast({title:"程序走丢了，请稍后重试",icon:"none"})})},toComment:function(){var t=this;console.time("toComment速度：");var e=i.createSelectorQuery().in(this),o=this.currentIndex;e.select(".dynamiccon-top").boundingClientRect(function(){}).exec(function(n){});for(var c=0;c<o;c++)e.select(".dyc-list".concat(c)).boundingClientRect(function(){}).exec(function(n){});e.select(".dyc-list".concat(o)).boundingClientRect(function(t){n("log","后面的信息：",t," at components\\content\\dynamic\\dynamicCpns\\DynamicCon.vue:393")}).exec(function(e){for(var i=0;i<e.length;i++)e[i].height;var c=e[o].height,a=e[o].top;t.$nextTick(function(){t.currentReplyindex=-1,t.commentContent="",t.commentPlaceholder="评论",t.hidePraiseCommentMask(),t.hasComment=!0,console.timeEnd("toComment速度："),t.commentStyle="top: ".concat(a+c,"px; bottom: unset; "),n("log",t.commentStyle," at components\\content\\dynamic\\dynamicCpns\\DynamicCon.vue:421")})})},showComment:function(n,t){this.friendDynamicList[n].comment[t].user!==this.userInfo.user.userAccount&&(this.commentContent="",this.commentPlaceholder="回复".concat(this.friendDynamicList[n].comment[t].userNickname,":"),this.hasComment=!0,this.currentIndex=n,this.currentReplyindex=t)},hidePraiseCommentMask:function(){var t=this;this.$nextTick(function(){t.isShowPraise=!1,n("log","hidePraiseCommentMask"," at components\\content\\dynamic\\dynamicCpns\\DynamicCon.vue:447")})},toFriendInfo:function(n){i.navigateTo({url:"/components/content/friend/FriendInfo?friendAccount=".concat(n)})},toPreviewImg:function(){i.previewImage({urls:this.imgList,indicator:"default",longPressActions:{itemList:["发送给朋友","保存图片","收藏"],success:function(t){var e=t;switch(n("log",e," at components\\content\\dynamic\\dynamicCpns\\DynamicCon.vue:474"),e.tapIndex){case 0:n("log","发送给朋友"," at components\\content\\dynamic\\dynamicCpns\\DynamicCon.vue:478");break;case 1:n("log","保存图片到系统相册:",this.imgList[e.index]," at components\\content\\dynamic\\dynamicCpns\\DynamicCon.vue:481"),i.saveImageToPhotosAlbum({filePath:this.imgList[e.index],success:function(t){n("log","保存成功：",t," at components\\content\\dynamic\\dynamicCpns\\DynamicCon.vue:486")},fail:function(t){n("log",t," at components\\content\\dynamic\\dynamicCpns\\DynamicCon.vue:490")}});break;case 2:n("log","收藏"," at components\\content\\dynamic\\dynamicCpns\\DynamicCon.vue:495");break}},fail:function(t){n("log",t.errMsg," at components\\content\\dynamic\\dynamicCpns\\DynamicCon.vue:500")}}})},toMyDynamic:function(){i.navigateTo({url:"/components/content/dynamic/MyDynamic?account=".concat(this.userInfo.user.userAccount)})},handleFocus:function(t){t.detail.height&&(this.keyboardHeight=t.detail.height,n("log",this.keyboardHeight," at components\\content\\dynamic\\dynamicCpns\\DynamicCon.vue:524"))},handleSmilingFace:function(){this.showSmilingFace=!0}}),created:function(){var t=this;this.imgUrl=c.imgBaseUrl,this.$nextTick(function(){t.getNewestDynamic()}),n("log","created"," at components\\content\\dynamic\\dynamicCpns\\DynamicCon.vue:538")}};t.default=d}).call(this,e("0de9")["default"],e("6e42")["default"])},"72df":function(n,t,e){"use strict";e.r(t);var i=e("9f79"),o=e("768c");for(var c in o)"default"!==c&&function(n){e.d(t,n,function(){return o[n]})}(c);e("b52d");var a,s=e("f0c5"),r=Object(s["a"])(o["default"],i["b"],i["c"],!1,null,"eb1fd536",null,!1,i["a"],a);t["default"]=r.exports},"768c":function(n,t,e){"use strict";e.r(t);var i=e("51b8"),o=e.n(i);for(var c in i)"default"!==c&&function(n){e.d(t,n,function(){return i[n]})}(c);t["default"]=o.a},8113:function(n,t,e){},"9f79":function(n,t,e){"use strict";var i,o=function(){var n=this,t=n.$createElement,e=(n._self._c,n.__map(n.friendDynamicList,function(t,e){var i=n._f("getFormatTime")(t.time),o=JSON.stringify(t.likePerson[0]);return{$orig:n.__get_orig(t),f0:i,g0:o}}));n.$mp.data=Object.assign({},{$root:{l0:e}})},c=[];e.d(t,"b",function(){return o}),e.d(t,"c",function(){return c}),e.d(t,"a",function(){return i})},b52d:function(n,t,e){"use strict";var i=e("8113"),o=e.n(i);o.a}}]);
;(global["webpackJsonp"] = global["webpackJsonp"] || []).push([
    'components/content/dynamic/dynamicCpns/DynamicCon-create-component',
    {
        'components/content/dynamic/dynamicCpns/DynamicCon-create-component':(function(module, exports, __webpack_require__){
            __webpack_require__('6e42')['createComponent'](__webpack_require__("72df"))
        })
    },
    [['components/content/dynamic/dynamicCpns/DynamicCon-create-component']]
]);
