(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["components/content/personalinfo/changeinfo/ChangeAddress2"],{"3e81":function(e,n,t){"use strict";var o=t("4d5e"),s=t.n(o);s.a},"4d5e":function(e,n,t){},8783:function(e,n,t){"use strict";t.r(n);var o=t("8a63"),s=t.n(o);for(var r in o)"default"!==r&&function(e){t.d(n,e,function(){return o[e]})}(r);n["default"]=s.a},"8a63":function(e,n,t){"use strict";(function(e,o){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var s=t("2f62"),r=t("b3e4");function i(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},o=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(t).filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),o.forEach(function(n){a(e,n,t[n])})}return e}function a(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}var c=function(){return t.e("components/content/defaultlist/DefaultList").then(t.bind(null,"0261"))},d={components:{DefaultList:c},data:function(){return{addressInfo:{},newAddress:!1,editAddress:!1,chooseIndex:"",userAddressList:[]}},computed:i({},(0,s.mapState)(["userInfo"])),created:function(){var e=JSON.parse(this.userInfo.user.userAddress);e.length>0&&(this.userAddressList=e)},methods:{calcInfoList:function(){var e=this.addressInfo;return!!e.consignee||(!!e.phone||(!!e.region||(!!e.address||!!e.postal)))},hasChangeAddressInfo:function(){var n=this.userAddressList[chooseIndex];return console.log(e(n," at components\\content\\personalinfo\\changeinfo\\ChangeAddress2.vue:98")),n!==this.addressInfo}},onBackPress:function(n){if("navigateBack"===n.from)return!1;if("backbutton"===n.from){if(this.newAddress){if(!this.calcInfoList())return!1;o.showModal({title:"提示",content:"确定放弃新增的信息？",success:function(e){if(e.confirm)o.navigateBack();else if(e.cancel)return!0},fail:function(n){return console.log(e(n," at components\\content\\personalinfo\\changeinfo\\ChangeAddress2.vue:127")),!0}})}if(this.editAddress){if(!this.hasChangeAddressInfo())return!1;o.showModal({title:"提示",content:"确定放弃修改的信息？",success:function(e){if(e.confirm)o.navigateBack();else if(e.cancel)return!0},fail:function(n){return console.log(e(n," at components\\content\\personalinfo\\changeinfo\\ChangeAddress2.vue:151")),!0}})}}return!0},onLoad:function(n){if(n.index){this.editAddress=!0,this.chooseIndex=n.index,o.setNavigationBarTitle({title:"修改地址"});var t=this.userAddressList;console.log(e(t," at components\\content\\personalinfo\\changeinfo\\ChangeAddress2.vue:174")),this.addressInfo=t[n.index],console.log(e(this.addressInfo," at components\\content\\personalinfo\\changeinfo\\ChangeAddress2.vue:177"))}else this.newAddress=!0,this.addressInfo={consignee:"",phone:"",region:"",detailedAddress:"",postal:""}},onNavigationBarButtonTap:function(n){var t=this;if(0===n.index){if(this.newAddress){var s=this.addressInfo;if(s.consignee&&s.phone&&s.region&&s.detailedAddress&&s.postal){var i=[];this.userInfo.user.userAddress.length>0&&(i=this.userAddressList),i.unshift(s);var a=JSON.stringify(i),c={userAccount:this.userInfo.user.userAccount,modifyContent:a,modifyType:3};(0,r.modifyUserInfo)(c).then(function(n){200===n.status?(2e3===n.data.code?(t.$set(t.userInfo.user,"userAddress",a),o.navigateBack()):o.showToast({title:"您可能与服务器断开了连接",icon:"none"}),console.log(e(n," at components\\content\\personalinfo\\changeinfo\\ChangeAddress2.vue:223"))):o.showToast({title:"您可能与服务器断开了连接",icon:"none"})}).catch(function(n){o.showToast({title:"您可能与服务器断开了连接",icon:"none"}),console.log(e(n," at components\\content\\personalinfo\\changeinfo\\ChangeAddress2.vue:235"))})}else o.showToast({title:"请填写完整信息",icon:"none"})}if(this.editAddress)if(this.hasChangeAddressInfo()){var d=this.userAddressList;d[this.chooseIndex]=this.addressInfo,console.log(e(d," at components\\content\\personalinfo\\changeinfo\\ChangeAddress2.vue:249"));var f=JSON.stringify(d),u={userAccount:this.userInfo.user.userAccount,modifyContent:f,modifyType:3};(0,r.modifyUserInfo)(u).then(function(n){200===n.status?(2e3===n.data.code?(t.$set(t.userInfo.user,"userAddress",f),console.log(e(t.userInfo.user," at components\\content\\personalinfo\\changeinfo\\ChangeAddress2.vue:262")),o.navigateBack()):o.showToast({title:"您可能与服务器断开了连接",icon:"none"}),console.log(e(n," at components\\content\\personalinfo\\changeinfo\\ChangeAddress2.vue:270"))):o.showToast({title:"您可能与服务器断开了连接",icon:"none"})}).catch(function(n){o.showToast({title:"您可能与服务器断开了连接",icon:"none"}),console.log(e(n," at components\\content\\personalinfo\\changeinfo\\ChangeAddress2.vue:282"))})}else o.showToast({title:"无修改信息",icon:"none"})}}};n.default=d}).call(this,t("0de9")["default"],t("6e42")["default"])},ce28:function(e,n,t){"use strict";var o,s=function(){var e=this,n=e.$createElement;e._self._c},r=[];t.d(n,"b",function(){return s}),t.d(n,"c",function(){return r}),t.d(n,"a",function(){return o})},d75c:function(e,n,t){"use strict";t.r(n);var o=t("ce28"),s=t("8783");for(var r in s)"default"!==r&&function(e){t.d(n,e,function(){return s[e]})}(r);t("3e81");var i,a=t("f0c5"),c=Object(a["a"])(s["default"],o["b"],o["c"],!1,null,null,null,!1,o["a"],i);n["default"]=c.exports},f69f:function(e,n,t){"use strict";(function(e){t("8484"),t("921b");o(t("66fd"));var n=o(t("d75c"));function o(e){return e&&e.__esModule?e:{default:e}}e(n.default)}).call(this,t("6e42")["createPage"])}},[["f69f","common/runtime","common/vendor"]]]);