(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["components/content/personalinfo/changeinfo/ChangeAddress2"],{"3e81":function(e,n,t){"use strict";var s=t("4d5e"),o=t.n(s);o.a},"4d5e":function(e,n,t){},8783:function(e,n,t){"use strict";t.r(n);var s=t("8a63"),o=t.n(s);for(var r in s)"default"!==r&&function(e){t.d(n,e,function(){return s[e]})}(r);n["default"]=o.a},"8a63":function(e,n,t){"use strict";(function(e,s){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=t("2f62"),r=t("b3e4");function i(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},s=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(s=s.concat(Object.getOwnPropertySymbols(t).filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.forEach(function(n){a(e,n,t[n])})}return e}function a(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}var c=function(){return t.e("components/content/defaultlist/DefaultList").then(t.bind(null,"0261"))},d={components:{DefaultList:c},data:function(){return{addressInfo:{},newAddress:!1,editAddress:!1,chooseIndex:"",userAddressList:[]}},computed:i({},(0,o.mapState)(["userInfo"])),created:function(){var e=JSON.parse(this.userInfo.user.userAddress);e.length>0&&(this.userAddressList=e)},methods:{calcInfoList:function(){var e=this.addressInfo;return!!e.consignee||(!!e.phone||(!!e.region||(!!e.address||!!e.postal)))},hasChangeAddressInfo:function(){var n=this.userAddressList[chooseIndex];return e("log",n," at components\\content\\personalinfo\\changeinfo\\ChangeAddress2.vue:98"),n!==this.addressInfo}},onBackPress:function(n){if("navigateBack"===n.from)return!1;if("backbutton"===n.from){if(this.newAddress){if(!this.calcInfoList())return!1;s.showModal({title:"提示",content:"确定放弃新增的信息？",success:function(e){if(e.confirm)s.navigateBack();else if(e.cancel)return!0},fail:function(n){return e("log",n," at components\\content\\personalinfo\\changeinfo\\ChangeAddress2.vue:127"),!0}})}if(this.editAddress){if(!this.hasChangeAddressInfo())return!1;s.showModal({title:"提示",content:"确定放弃修改的信息？",success:function(e){if(e.confirm)s.navigateBack();else if(e.cancel)return!0},fail:function(n){return e("log",n," at components\\content\\personalinfo\\changeinfo\\ChangeAddress2.vue:151"),!0}})}}return!0},onLoad:function(n){if(n.index){this.editAddress=!0,this.chooseIndex=n.index,s.setNavigationBarTitle({title:"修改地址"});var t=this.userAddressList;e("log",t," at components\\content\\personalinfo\\changeinfo\\ChangeAddress2.vue:174"),this.addressInfo=t[n.index],e("log",this.addressInfo," at components\\content\\personalinfo\\changeinfo\\ChangeAddress2.vue:177")}else this.newAddress=!0,this.addressInfo={consignee:"",phone:"",region:"",detailedAddress:"",postal:""}},onNavigationBarButtonTap:function(n){var t=this;if(0===n.index){if(this.newAddress){var o=this.addressInfo;if(o.consignee&&o.phone&&o.region&&o.detailedAddress&&o.postal){var i=[];this.userInfo.user.userAddress.length>0&&(i=this.userAddressList),i.unshift(o);var a=JSON.stringify(i),c={userAccount:this.userInfo.user.userAccount,modifyContent:a,modifyType:3};(0,r.modifyUserInfo)(c).then(function(n){200===n.status?(2e3===n.data.code?(t.$set(t.userInfo.user,"userAddress",a),s.setStorageSync("userInfo",t.userInfo),s.navigateBack()):s.showToast({title:"您可能与服务器断开了连接",icon:"none"}),e("log",n," at components\\content\\personalinfo\\changeinfo\\ChangeAddress2.vue:224")):s.showToast({title:"您可能与服务器断开了连接",icon:"none"})}).catch(function(n){s.showToast({title:"您可能与服务器断开了连接",icon:"none"}),e("log",n," at components\\content\\personalinfo\\changeinfo\\ChangeAddress2.vue:236")})}else s.showToast({title:"请填写完整信息",icon:"none"})}if(this.editAddress)if(this.hasChangeAddressInfo()){var d=this.userAddressList;d[this.chooseIndex]=this.addressInfo,e("log",d," at components\\content\\personalinfo\\changeinfo\\ChangeAddress2.vue:250");var f=JSON.stringify(d),u={userAccount:this.userInfo.user.userAccount,modifyContent:f,modifyType:3};(0,r.modifyUserInfo)(u).then(function(n){200===n.status?(2e3===n.data.code?(t.$set(t.userInfo.user,"userAddress",f),s.setStorageSync("userInfo",t.userInfo),s.navigateBack()):s.showToast({title:"您可能与服务器断开了连接",icon:"none"}),e("log",n," at components\\content\\personalinfo\\changeinfo\\ChangeAddress2.vue:271")):s.showToast({title:"您可能与服务器断开了连接",icon:"none"})}).catch(function(n){s.showToast({title:"您可能与服务器断开了连接",icon:"none"}),e("log",n," at components\\content\\personalinfo\\changeinfo\\ChangeAddress2.vue:283")})}else s.showToast({title:"无修改信息",icon:"none"})}}};n.default=d}).call(this,t("0de9")["default"],t("6e42")["default"])},"9ed3":function(e,n,t){"use strict";var s,o=function(){var e=this,n=e.$createElement;e._self._c},r=[];t.d(n,"b",function(){return o}),t.d(n,"c",function(){return r}),t.d(n,"a",function(){return s})},d75c:function(e,n,t){"use strict";t.r(n);var s=t("9ed3"),o=t("8783");for(var r in o)"default"!==r&&function(e){t.d(n,e,function(){return o[e]})}(r);t("3e81");var i,a=t("f0c5"),c=Object(a["a"])(o["default"],s["b"],s["c"],!1,null,null,null,!1,s["a"],i);n["default"]=c.exports},f69f:function(e,n,t){"use strict";(function(e){t("8484"),t("921b");s(t("66fd"));var n=s(t("d75c"));function s(e){return e&&e.__esModule?e:{default:e}}e(n.default)}).call(this,t("6e42")["createPage"])}},[["f69f","common/runtime","common/vendor"]]]);