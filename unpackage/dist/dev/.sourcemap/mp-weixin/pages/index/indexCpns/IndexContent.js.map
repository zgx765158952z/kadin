{"version":3,"sources":["webpack:///E:/learning/kadingapp/pages/index/indexCpns/IndexContent.vue?2a72","webpack:///E:/learning/kadingapp/pages/index/indexCpns/IndexContent.vue?b090","webpack:///E:/learning/kadingapp/pages/index/indexCpns/IndexContent.vue?9bad","webpack:///E:/learning/kadingapp/pages/index/indexCpns/IndexContent.vue?b94a","webpack:///E:/learning/kadingapp/pages/index/indexCpns/IndexContent.vue","webpack:///E:/learning/kadingapp/pages/index/indexCpns/IndexContent.vue?ebb6","webpack:///E:/learning/kadingapp/pages/index/indexCpns/IndexContent.vue?fb2c"],"names":["app","getApp","name","data","chatList","userList","imgUrl","targetInfo","computed","o_convertRawMessageListToRenderChatList","sessions","Object","keys","rawMessageList","index","map","session","account","indexOf","slice","length","isP2p","chatType","groupList","type","sessionCard","friendCard","unixtimeList","maxTime","Math","max","msg","msgType","judgeMessageType","lastestMsg","status","nick","push","text","timestamp","time","unread","unreadInfo","displayTime","sort","a","b","console","log","watch","MconvertRawMessageListToRenderChatList","deep","handler","newV","oldV","convertRawMessageListToRenderChatList","mixins","listPopShadeMixin","methods","rawMsgList","rawMsg","pushContent","choosePop","toSession","e","currentTarget","dataset","setCurrentChatTo","typeAndAccount","split","card","setCurrentGroup","uni","setStorageSync","chatTo","navigateTo","url","success","res","globalData","nim","resetSessionUnread","beforeCreate","imgBaseUrl","mounted","$once","$nextTick","$forceUpdate"],"mappings":"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","file":"pages/index/indexCpns/IndexContent.js","sourcesContent":["import { render, staticRenderFns, recyclableRender, components } from \"./IndexContent.vue?vue&type=template&id=4d80d82f&scoped=true&\"\nvar renderjs\nimport script from \"./IndexContent.vue?vue&type=script&lang=js&\"\nexport * from \"./IndexContent.vue?vue&type=script&lang=js&\"\nimport style0 from \"./IndexContent.vue?vue&type=style&index=0&id=4d80d82f&scoped=true&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../HBuilderX.2.4.2.20191115.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"4d80d82f\",\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"learning/kadingapp/pages/index/indexCpns/IndexContent.vue\"\nexport default component.exports","export * from \"-!../../../../../HBuilderX.2.4.2.20191115.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../HBuilderX.2.4.2.20191115.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../../HBuilderX.2.4.2.20191115.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../HBuilderX.2.4.2.20191115.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../HBuilderX.2.4.2.20191115.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../HBuilderX.2.4.2.20191115.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./IndexContent.vue?vue&type=template&id=4d80d82f&scoped=true&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var l0 = _vm.__map(_vm.MconvertRawMessageListToRenderChatList, function(\n    item,\n    index\n  ) {\n    var m0 = _vm.getFriendInfoByAcccount(\"p2p\", item.account, \"friendFaceImage\")\n    var m1 = _vm.getFriendInfoByAcccount(\n      \"p2p\",\n      item.account,\n      \"friendRemarkName\"\n    )\n    return {\n      $orig: _vm.__get_orig(item),\n      m0: m0,\n      m1: m1\n    }\n  })\n\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        l0: l0\n      }\n    }\n  )\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../HBuilderX.2.4.2.20191115.full/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../HBuilderX.2.4.2.20191115.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../HBuilderX.2.4.2.20191115.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../HBuilderX.2.4.2.20191115.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../HBuilderX.2.4.2.20191115.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./IndexContent.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../HBuilderX.2.4.2.20191115.full/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../HBuilderX.2.4.2.20191115.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../HBuilderX.2.4.2.20191115.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../HBuilderX.2.4.2.20191115.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../HBuilderX.2.4.2.20191115.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./IndexContent.vue?vue&type=script&lang=js&\"","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport {\n\tlistPopShadeMixin\n} from '@/common/utils.js'\nimport {\n\tmapState,\n\tmapGetters,\n\tmapMutations,\n\tmapActions\n} from 'vuex'\nimport {\n\timgBaseUrl\n} from \"@/common/helper.js\"\n\nimport {\n\tcalcTimeHeader\n} from '@/utils/utils.js'\n\nlet app = getApp()\nexport default {\n\tname: 'IndexContent',\n\tdata() {\n\t\treturn {\n\t\t\tchatList: [], //会话列表\n\t\t\tuserList: [],\n\t\t\timgUrl: '',\n\t\t\ttargetInfo: {}\n\t\t}\n\t},\n\tcomputed: {\n\t\t...mapState(['friendList', 'rawMessageList', 'friendCard', 'groupList', 'unreadInfo']),\n\t\t...mapGetters(['getFriendInfoByAcccount', 'MconvertRawMessageListToRenderChatList']),\n\t\t\n\t\t/**\n\t\t * 将原生消息转化为最近会话列表渲染数据\n\t\t */\n\t\to_convertRawMessageListToRenderChatList() {\n\t\t\tlet chatList = []\n\t\t\tlet sessions = Object.keys(this.rawMessageList)\n\t\t\tlet index = 0\n\t\t\tsessions.map(session => { //遍历原始消息列表的键sessionId\n\t\t\t\tlet account = session.indexOf('team-') === 0 ? session.slice(5, session.length) : session.slice(4, session.length)\n\t\t\t\tlet isP2p = session.indexOf('p2p-') === 0\n\t\t\t\tlet chatType = isP2p ? 'p2p' : (this.groupList[account] && this.groupList[account].type)\n\t\t\t\tlet sessionCard = (isP2p ? this.friendCard[account] : this.groupList[account]) || {}\n\t\t\t\tlet unixtimeList = Object.keys(this.rawMessageList[session]) //遍历原始消息对应sessionId的属性的键(即时间戳)\n\t\t\t\tif (!unixtimeList) {\n\t\t\t\t\treturn\n\t\t\t\t}\n\t\t\t\tlet maxTime = Math.max(...unixtimeList) //返回时间戳数组中最大即最新的时间戳,时间戳对应的属性就是对应该消息\n\t\t\t\tif (maxTime) { //处理单条消息,后作为首页的会话列表展示\n\t\t\t\t\tlet msg = this.rawMessageList[session][maxTime + ''] || {} //取到最新消息\n\t\t\t\t\tlet msgType = this.judgeMessageType(msg)\n\t\t\t\t\tlet lastestMsg = msgType\n\t\t\t\t\tlet status = isP2p ? (sessionCard.status || '离线') : '' //名片信息\n\t\t\t\t\tlet nick = isP2p ? (sessionCard.nick || '非好友') : sessionCard.name\n\t\t\t\t\t// let avatar =  isP2p ? (sessionCard.avatar || app.globalData.PAGE_CONFIG.defaultUserLogo) : (sessionCard.avatar || app.globalData.PAGE_CONFIG.defaultUserLogo)\n\t\t\t\t\tchatList.push({\n\t\t\t\t\t\tchatType,\n\t\t\t\t\t\tsession,\n\t\t\t\t\t\taccount,\n\t\t\t\t\t\tstatus,\n\t\t\t\t\t\tnick, //名字\n\t\t\t\t\t\t// avatar, //头像\n\t\t\t\t\t\tlastestMsg: lastestMsg || msg.text,\n\t\t\t\t\t\ttype: msgType || msg.type,\n\t\t\t\t\t\ttimestamp: msg.time,\n\t\t\t\t\t\tunread: this.unreadInfo[session] || 0,\n\t\t\t\t\t\tdisplayTime: msg.time ? calcTimeHeader(msg.time) : ''\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t})\n\t\t\t// 排序\n\t\t\tchatList.sort((a, b) => {\n\t\t\t\treturn b.timestamp - a.timestamp\n\t\t\t})\n\t\t\tconsole.log('chatList:', chatList, this.rawMessageList)\n\t\t\t\n\t\t\treturn chatList\n\t\t}\n\t}, \n\twatch: {\n\t\tMconvertRawMessageListToRenderChatList: {\n\t\t\tdeep:true, //深度监听设置为 true\n\t\t\thandler(newV){\n\t\t\t\tconsole.log('MconvertRawMessageListToRenderChatList：',newV)\n\t\t\t}\n\t\t},\n\t\trawMessageList: {\n\t\t\thandler(newV,oldV){\n\t\t\t\tconsole.log('监听rawMessageList', newV, oldV)\n\t\t\t\tif(newV !== oldV) {\n\t\t\t\t\tthis.convertRawMessageListToRenderChatList()\n\t\t\t\t}\n\t\t\t},\n\t\t\tdeep:true //深度监听设置为 true\n\t\t},\n\t\tunreadInfo: {\n\t\t\tdeep:true, //深度监听设置为 true\n\t\t\thandler(newV){\n\t\t\t\tconsole.log('watch中：',newV)\n\t\t\t}\n\t\t}\n\t},\n\tmixins: [listPopShadeMixin],\n\tmethods: {\n\t\t...mapActions(['imAction']),\n\t\t...mapMutations(['setCurrentChatTo', 'setCurrentGroup']),\n\t\t/**\n\t\t * 将原生消息转化为最近会话列表渲染数据\n\t\t */\n\t\tconvertRawMessageListToRenderChatList(rawMsgList=null) {\n\t\t\t\n\t\t\tlet chatList = []\n\t\t\tlet sessions = Object.keys(this.rawMessageList)\n\t\t\tlet index = 0\n\t\t\tsessions.map(session => { //遍历原始消息列表的键sessionId\n\t\t\t\tlet account = session.indexOf('team-') === 0 ? session.slice(5, session.length) : session.slice(4, session.length)\n\t\t\t\tlet isP2p = session.indexOf('p2p-') === 0\n\t\t\t\tlet chatType = isP2p ? 'p2p' : (this.groupList[account] && this.groupList[account].type)\n\t\t\t\tlet sessionCard = (isP2p ? this.friendCard[account] : this.groupList[account]) || {}\n\t\t\t\tlet unixtimeList = Object.keys(this.rawMessageList[session]) //遍历原始消息对应sessionId的属性的键(即时间戳)\n\t\t\t\tif (!unixtimeList) {\n\t\t\t\t\treturn\n\t\t\t\t}\n\t\t\t\tlet maxTime = Math.max(...unixtimeList) //返回时间戳数组中最大即最新的时间戳,时间戳对应的属性就是对应该消息\n\t\t\t\tif (maxTime) { //处理单条消息,后作为首页的会话列表展示\n\t\t\t\t\tlet msg = this.rawMessageList[session][maxTime + ''] || {} //取到最新消息\n\t\t\t\t\tlet msgType = this.judgeMessageType(msg)\n\t\t\t\t\tlet lastestMsg = msgType\n\t\t\t\t\tlet status = isP2p ? (sessionCard.status || '离线') : '' //名片信息\n\t\t\t\t\tlet nick = isP2p ? (sessionCard.nick || '非好友') : sessionCard.name\n\t\t\t\t\t// let avatar =  isP2p ? (sessionCard.avatar || app.globalData.PAGE_CONFIG.defaultUserLogo) : (sessionCard.avatar || app.globalData.PAGE_CONFIG.defaultUserLogo)\n\t\t\t\t\tchatList.push({\n\t\t\t\t\t\tchatType,\n\t\t\t\t\t\tsession,\n\t\t\t\t\t\taccount,\n\t\t\t\t\t\tstatus,\n\t\t\t\t\t\tnick, //名字\n\t\t\t\t\t\t// avatar, //头像\n\t\t\t\t\t\tlastestMsg: lastestMsg || msg.text,\n\t\t\t\t\t\ttype: msgType || msg.type,\n\t\t\t\t\t\ttimestamp: msg.time,\n\t\t\t\t\t\tunread: this.unreadInfo[session] || 0,\n\t\t\t\t\t\tdisplayTime: msg.time ? calcTimeHeader(msg.time) : ''\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t})\n\t\t\t// 排序\n\t\t\tchatList.sort((a, b) => {\n\t\t\t\treturn b.timestamp - a.timestamp\n\t\t\t})\n\t\t\tconsole.log('chatList:', chatList, this.rawMessageList)\n\t\t\t\n\t\t\tthis.chatList = chatList\n\t\t\t\n\t\t},\n\t\t\n\t\t/**\n\t\t * 判断消息类型，返回提示\n\t\t */\n\t\tjudgeMessageType(rawMsg) {\n\t\t\trawMsg = rawMsg || {}\n\t\t\tlet msgType = ''\n\t\t\tif (rawMsg.type === 'image') {\n\t\t\t\tmsgType = '[图片]'\n\t\t\t} else if (rawMsg.type === 'geo') {\n\t\t\t\tmsgType = '[位置]'\n\t\t\t} else if (rawMsg.type === 'audio') {\n\t\t\t\tmsgType = '[语音]'\n\t\t\t} else if (rawMsg.type === 'video') {\n\t\t\t\tmsgType = '[视频]'\n\t\t\t} else if (rawMsg.type === 'custom') {\n\t\t\t\tmsgType = rawMsg.pushContent || '[自定义消息]'\n\t\t\t} else if (rawMsg.type === 'tip') {\n\t\t\t\tmsgType = '[提醒消息]'\n\t\t\t} else if (rawMsg.type === 'deleteMsg') { //可能是他人撤回消息\n\t\t\t\tmsgType = '[提醒消息]'\n\t\t\t} else if (rawMsg.type === 'file') {\n\t\t\t\tmsgType = '[文件消息]'\n\t\t\t} else if (rawMsg.type === '白板消息') {\n\t\t\t\tmsgType = '[白板消息]'\n\t\t\t} else if (rawMsg.type === '阅后即焚') {\n\t\t\t\tmsgType = '[阅后即焚]'\n\t\t\t} else if (rawMsg.type === 'robot') {\n\t\t\t\tmsgType = '[机器人消息]'\n\t\t\t} else if (rawMsg.type === 'notification') {\n\t\t\t\tmsgType = '[通知消息]'\n\t\t\t}\n\t\t\treturn msgType\n\t\t},\n\n\t\t//点击菜单的下标index\n\t\tchoosePop(index) {\n\t\t\treturn index\n\t\t},\n\t\t\n\t\t\n\t\t\n\t\t//跳转到session\n\t\ttoSession(e) {\n\t\t\tlet account = e.currentTarget.dataset.account\n\t\t\tlet session = e.currentTarget.dataset.session\n\t\t\tconsole.log('account和session:', account, session)\n\t\t\t// 更新会话对象\n\t\t\tthis.setCurrentChatTo(session)\n\t\t\tlet typeAndAccount = session.split('-') //分割team-2356565\n\t\t\tlet chatType = ''\n\t\t\tif (typeAndAccount[0] === 'team') {\n\t\t\t  console.log('team跳转')\n\t\t\t  let card = this.groupList[typeAndAccount[1]] || {}\n\t\t\t  chatType = card.type || 'team'\n\t\t\t  this.setCurrentGroup(account)\n\t\t\t} else {\n\t\t\t  console.log('p2p跳转')\n\t\t\t  chatType = 'p2p'\n\t\t\t}\n\t\t\tuni.setStorageSync('toSessionObj', {\n\t\t\t\tchatType,\n\t\t\t\tchatTo: account\n\t\t\t})\n\t\t\t//跳转\n\t\t\tuni.navigateTo({\n\t\t\t\turl: '/components/content/session/Session',\n\t\t\t\tsuccess: res => {\n\t\t\t\t\t// 告知服务器，标记会话已读\n\t\t\t\t\tapp.globalData.nim.resetSessionUnread(session)\n\t\t\t\t}\n\t\t\t})\n\t\t\t\n\t\t}\n\n\t},\n\tbeforeCreate() {\n\t\tthis.imgUrl = imgBaseUrl\n\t\tconsole.log('beforeCreate', this.imgUrl)\n\t\t\n\t},\n\tmounted() {\n\t\tconsole.log('mounted')\n\t\tuni.$once('syncComplete', () => {\n\t\t\tthis.$nextTick(() => {\n\t\t\t\tthis.$forceUpdate()\n\t\t\t})\n\t\t\tthis.$forceUpdate()\n\t\t})\n\t\t\n\t}\n\t\n}\n","import mod from \"-!../../../../../HBuilderX.2.4.2.20191115.full/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../HBuilderX.2.4.2.20191115.full/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../HBuilderX.2.4.2.20191115.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../HBuilderX.2.4.2.20191115.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../HBuilderX.2.4.2.20191115.full/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../HBuilderX.2.4.2.20191115.full/HBuilderX/plugins/uniapp-cli/node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../HBuilderX.2.4.2.20191115.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../HBuilderX.2.4.2.20191115.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../HBuilderX.2.4.2.20191115.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./IndexContent.vue?vue&type=style&index=0&id=4d80d82f&scoped=true&lang=scss&\"; export default mod; export * from \"-!../../../../../HBuilderX.2.4.2.20191115.full/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../HBuilderX.2.4.2.20191115.full/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../HBuilderX.2.4.2.20191115.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../HBuilderX.2.4.2.20191115.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../HBuilderX.2.4.2.20191115.full/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../HBuilderX.2.4.2.20191115.full/HBuilderX/plugins/uniapp-cli/node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../HBuilderX.2.4.2.20191115.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../HBuilderX.2.4.2.20191115.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../HBuilderX.2.4.2.20191115.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./IndexContent.vue?vue&type=style&index=0&id=4d80d82f&scoped=true&lang=scss&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1593479382679\n      var cssReload = require(\"E:/HBuilderX.2.4.2.20191115.full/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}